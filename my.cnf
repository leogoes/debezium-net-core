#
# my.cnf - MySQL Server Configuration File Example
#

# --- GLOBAL SETTINGS ---
# Settings in this group are applied to all programs (mysqld, mysql client, etc.)
[client]
# Default port to connect to
port = 3306
# Default character set
default-character-set = utf8mb4

# --- SERVER SETTINGS ---
# Settings in this group are applied to the MySQL Server daemon (mysqld)
[mysqld]

# 1. Basic Configuration
# ----------------------
# Unique ID for the server (essential for replication/binlog)
server-id = 1
# Port the server listens on
port = 3306
# IP address the server binds to (0.0.0.0 binds to all interfaces)
bind-address = 0.0.0.0

# 2. Character Set and Collation
# ------------------------------
# Default character set for data storage
character-set-server = utf8mb4
# Default collation (rules for comparing characters)
collation-server = utf8mb4_unicode_ci

# 3. Time Zone (Crucial for Debezium)
# ------------------------------------
# It's highly recommended to use a standard IANA time zone identifier (like UTC) 
# instead of a local name (like 'Hora oficial do Brasil') to prevent the error you saw.
default-time-zone = '+00:00' 
# OR
# default-time-zone = 'UTC' 

# 4. Storage Engine (InnoDB is standard)
# -------------------------------------
default-storage-engine = InnoDB
# Innodb file-per-table mode
innodb-file-per-table = 1

# 5. Binary Log (Essential for Debezium/Change Data Capture)
# -----------------------------------------------------------
# Enables binary logging
log_bin = mysql-bin
# Ensures binlog writes are synchronous (higher durability, slight performance cost)
sync_binlog = 1
# Format of the binlog (ROW is required for Debezium)
binlog_format = ROW
# Retention period for binary log files (e.g., 7 days)
expire_logs_days = 7
# Mandatory database-level settings for replication safety
gtid_mode = ON
enforce_gtid_consistency = ON

# 6. Resource Limits and Buffers
# ------------------------------
# Size of the buffer pool (critical for performance)
# A common starting point is 50-80% of available RAM if MySQL is the primary app
# innodb_buffer_pool_size = 8G
# Maximum number of concurrent connections
max_connections = 151
# Key buffer size (for MyISAM indexes, less relevant for InnoDB)
key_buffer_size = 128M

# 7. Logging
# ----------
# Path to the error log file
# log_error = /var/log/mysql/error.log
# Path for slow query logging
# slow_query_log_file = /var/log/mysql/mysql-slow.log
# Enable slow query log
# slow_query_log = 1


# --- CLIENT SETTINGS ---
# Settings in this group are applied to the MySQL client program (mysql)
[mysql]
# Automatically reconnect if the connection is lost
reconnect = true

# --- MYSQLDUMP SETTINGS ---
# Settings in this group are applied to the mysqldump utility
[mysqldump]
# Ensure full compatibility between versions
quick
max_allowed_packet = 16M